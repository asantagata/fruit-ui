<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:,">
    <title>Router</title>
    <style>
        .selected {color: blue}
        li {
            cursor: pointer;
            text-decoration: underline;
        }
    </style>
</head>
<body style="background: #ccc">
    <div id="div"></div>
</body>
<script type="module">
    import * as fruit from '../../core/src/index.js';
    import * as router from '../src/router.js';

    const Header = {
        state() {
            return {
                page: router.getPage()
            }
        },
        render() {
            return {
                tag: 'ul',
                children: [
                    {name: 'Home', href: ''},
                    {name: 'About', href: 'about'},
                    {name: 'Contact', href: 'contact'},
                    {name: 'Bwjfbg', href: 'hfjgbsdjf'}
                ].map(({name, href}) => ({
                    tag: 'li',
                    children: name,
                    class: {selected: href === this.state.page},
                    on: {
                        click() {
                            router.navigate(href);
                        },
                    }
                })),
                dataset: {receivePageChanges: true},
                on: {
                    pagechange(e) {
                        this.setState.page(e.detail.page);
                    }
                }
            }
        }
    }

    const Content = router.Router({
        '': {title: 'Home', route: () => 'You are now on: Home'},
        'about': {title: 'About', route: () => 'You are now on: About'},
        'contact': {route: () => 'You are now on: Contact'},
        '*': {title: 'Uh oh!', route: (page) => `You are now on: ${page}`},
    });

    fruit.replaceWith(document.getElementById("div"), {
        children: [Header, Content]
    });

</script>
</html>
