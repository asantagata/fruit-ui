const PARAM_NAME="page";function getPage(){const params=new URLSearchParams(window.location.search);return params.get(PARAM_NAME)??""}function getPageItem(routes,page,isFunctional){if(routes[page])return routes[page];if(routes[`/${page}`])return routes[`/${page}`];if(routes["*"])return routes["*"];if(routes["/*"])return routes["/*"];return isFunctional?()=>undefined:""}function Router(routes,titles){return{render(){const page=getPage();const route=getPageItem(routes,page)();return{children:typeof route==="object"?{...route,key:page}:route,id:"router",dataset:{receivePageChanges:true},on:{pagechange(){this.rerender();if(titles){const title=getPageItem(titles,getPage());if(title)document.title=title}},mount(){window.onpopstate=()=>broadcastPageChange(getPage())}}}}}}function navigate(page){if(page.startsWith("/"))page=page.slice(1);if(page===getPage())return;const url=new URL(window.location.href);url.searchParams.set(PARAM_NAME,page);window.history.pushState({},"",url);broadcastPageChange(page)}function broadcastPageChange(page){const event=new CustomEvent("pagechange",{detail:{page:page}});Array.from(document.querySelectorAll(`[data-receive-page-changes]`)).forEach(target=>{target.dispatchEvent(event)})}export{navigate,Router,getPage};